if (self.CavalryLogger) { CavalryLogger.start_js(["1hWE2"]); }

__d("CometNewsFeedVPVDStore_newsFeedEdge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometNewsFeedVPVDStore_newsFeedEdge"};e.exports=a}),null);
__d("VideoHomeDurationThumbnailOverlay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"VideoHomeDurationThumbnailOverlay_video",type:"Video",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"broadcast_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_viewer_watched_show_video",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"playable_duration",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_spherical",args:null,storageKey:null}]};e.exports=a}),null);
__d("CometNewsFeedVPVDStore",["CircularBuffer","CometRelay","React","emptyFunction","CometNewsFeedVPVDStore_newsFeedEdge.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("CometRelay").graphql;var h=b("CometRelay").readInlineData,i=(c=b("React")).useCallback,j=c.useContext;d=function(){__p&&__p();var a=new(b("CircularBuffer"))(50);return{readRecentVPVDs:function(){var b=a.read();a.clear();return b},writeRecentVPVD:function(c,d){var e=h(g!==void 0?g:g=b("CometNewsFeedVPVDStore_newsFeedEdge.graphql"),c);c=a.read().find(function(a){var b;a=a.vsid;return(e==null?void 0:(b=e.feed_backend_data)==null?void 0:b.vsid)===a});if(c)return;a.write({evt:"vpv",fetch_tracking:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.should_recent_vpv_fetch_tracking_data,original_qid:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.original_qid,qid:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.qid,timestamp:d,vsid:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.vsid,vspos:e==null?void 0:(d=e.feed_backend_data)==null?void 0:d.vspos})}}};var k=c.createContext(),l=c.createContext(b("emptyFunction"));function a(a){var c=a.children,d=a.newsFeedEdge,e=j(k);a=i(function(a){e&&e.writeRecentVPVD(d,a)},[d,e]);return b("React").jsx(l.Provider,{value:a,children:c})}e.exports={LoggerContext:l,LoggerProvider:a,StoreProvider:k.Provider,createStore:d}}),null);
__d("useStoryVPVDLogger",["requireDeferred","CometInteractionSourceContext","CometNewsFeedVPVDStore","InteractionSource","React","WebSession","gkx","useVPVDImpression"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("Banzai"),h=b("requireDeferred")("CometFeedVpvdTestFalcoEvent"),i=b("React").useCallback,j=b("React").useContext,k=b("React").useRef,l=Object.keys(b("InteractionSource")).reduce(function(a,c){a[b("InteractionSource")[c]]=c;return a},{}),m=function(a){var c;return{csp:a.storyPosition,sid_raw:b("WebSession").getId(),source:a.source,story_height:a.story_height,storyId:a.id,vpvd_start_timestamp_ms:a.visibleTime,vpvd_time_delta_ms:a.hiddenTime-((c=a.visibleTime)!=null?c:0),xt:a.encrypted_tracking}};function a(a,c,d){__p&&__p();var e=(d=d)!=null?d:j(b("CometInteractionSourceContext"));d=l[e];var f="STORYID-"+c+"-"+d+"-"+(a||"").slice(0,15),n=j(b("CometNewsFeedVPVDStore").LoggerContext),o=k(null);d=i(function(a){var b=a.entry;a=a.visibleTime;n(a);o.current=(b=b==null?void 0:(a=b.boundingClientRect)==null?void 0:a.height)!=null?b:null},[n]);var p=i(function(b){__p&&__p();var d,i=b.hiddenTime;b.visibleDuration;b=b.visibleTime;var j=o.current!=null?Math.round(o.current):null,k=m({encrypted_tracking:(d=a)!=null?d:"",hiddenTime:i,id:f,source:e,story_height:j,storyPosition:c,visibleTime:b});g.onReady(function(a){a.post("comet_metrics:vpvd",k)});h.onReady(function(a){a=a.log;a(function(){return{is_comet:!0,story_height:j,story_id:f}})})},[e,f,c,a]);return b("useVPVDImpression")({onVPVDEnd:p,onVPVDStart:d})}e.exports=a}),null);
__d("useImpressionLogger",["CometViewportMarginsContext","React","getIntersectionMarginFromViewportMargin","intersectionObserverEntryIsIntersecting","useIntersectionObserver"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("React").useRef;function a(a,c){__p&&__p();var d=h(b("CometViewportMarginsContext")),e=i(!1),f=g(function(d){__p&&__p();d=b("intersectionObserverEntryIsIntersecting")(d);if(e.current!==d){e.current=d;if(e.current){var f=new Date();e.current=!0;a.onReady(function(a){c(a,f)})}}},[c,a]);return b("useIntersectionObserver")(f,{root:null,rootMargin:b("getIntersectionMarginFromViewportMargin")(d),threshold:0})}e.exports=a}),null);
__d("VideoHomeDurationThumbnailOverlay.react",["cx","fbt","ix","FlexLayout.react","Image.react","React","RelayModern","VideoBroadcastStatus","VideoStateDirectory","XUIText.react","formatDurationSeconds","joinClasses","VideoHomeDurationThumbnailOverlay_video.graphql"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=function(a){a.watched!==void 0&&d.setState({watched:a.watched})};c=d.props.video;var e=c&&!!c.has_viewer_watched_show_video;d.state={watched:e};c&&c.id&&(d.subscription=b("VideoStateDirectory").addListener(c.id,d.$1));return d}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.disableShowWatched;a=a.video;if(!a)return null;if(a.broadcast_status===b("VideoBroadcastStatus").LIVE)return null;var d=a.playable_duration||0,e=this.state.watched;if(d===0&&!e)return null;!c&&e?c=h._("\u0e23\u0e31\u0e1a\u0e0a\u0e21\u0e41\u0e25\u0e49\u0e27"):c=b("formatDurationSeconds")(d);e=null;a.is_spherical&&(e=b("React").jsx(b("Image.react"),{className:"__lq",src:i("501720")}));return b("React").jsx(b("XUIText.react"),{className:b("joinClasses")(this.props.className,"_2dig"),weight:"bold",style:{fontSize:this.props.fontSize+"px"},children:b("React").jsxs(b("FlexLayout.react"),{align:"center",children:[e,c]})})};return c}(b("React").PureComponent);c.defaultProps={fontSize:12};e.exports=a(c,{video:j!==void 0?j:j=b("VideoHomeDurationThumbnailOverlay_video.graphql")})}),null);