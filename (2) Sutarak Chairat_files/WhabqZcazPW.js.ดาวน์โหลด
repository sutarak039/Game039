if (self.CavalryLogger) { CavalryLogger.start_js(["1C5Tx"]); }

__d("requestManifest",["Deferred","URI","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){var c=new(b("Deferred"))();a=new(g||(g=b("URI")))(a);new(b("XHRRequest"))(a).setMethod("GET").setResponseType("text").setTransportBuilder(b("getCrossOriginTransport")).setErrorHandler(function(a){c.reject(a)}).setResponseHandler(Object.assign(function(a){c.resolve(a)},{includeHeaders:!0})).send();return c.getPromise()}e.exports=a}),null);
__d("SegmentInfoConstants",[],(function(a,b,c,d,e,f){"use strict";a=10;b=10;c=2/15;d=1+2*c;f=.25;var g=40,h=0,i=1,j=2,k=0,l=1,m=0,n=1,o=10;e.exports={AUDIO_BITRATE_INDEX:l,AUDIO_BUFFER_INDEX:i,AUDIO_SEGMENT_INDEX:n,COMBO_BUFFER_INDEX:j,FUTURE_SEGMENT_TIME:b,MAX_SEGMENT_SEARCH_RANGE:o,NEARBY_SEGMENT_ARR_SIZE:g,PAST_SEGMENT_TIME:a,SEGMENT_GRAPH_BORDER_LENGTH:c,SLOPE:f,TRACK_LENGTH:d,VIDEO_BITRATE_INDEX:k,VIDEO_BUFFER_INDEX:h,VIDEO_SEGMENT_INDEX:m}}),null);
__d("VideoPlayerImplementationHelper",["BinarySearch","SegmentInfoConstants","getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=(g=b("SegmentInfoConstants")).AUDIO_BUFFER_INDEX,i=g.AUDIO_SEGMENT_INDEX,j=g.COMBO_BUFFER_INDEX,k=g.VIDEO_BUFFER_INDEX,l=g.VIDEO_SEGMENT_INDEX;function a(a){var c=a.hostCallError,d=a.videoElementError,e=a.videoElementNetworkState;a=a.videoElementReadyState;var f=d==null?void 0:d.code;c=c!=null&&typeof c.message==="string"?c.message:null;c==null&&(c=d==null?void 0:d.message);c==null&&f!=null&&(c=b("getErrorMessageFromMediaErrorCode")(f));d={errorDescription:((d=c)!=null?d:"Empty error")+("; code: "+((c=f)!=null?c:"undefined"))+("; readyState: "+a)+("; networkState: "+e),errorName:b("getErrorNameFromMediaErrorCode")(f)};return d}function c(a){if(a==null){var b={errorDescription:"Empty rejection reason from video play()",errorName:"PlayRejectedError"};return b}b={errorCode:typeof a.code==="string"?a.code:typeof a.code==="number"?String(a.code):void 0,errorDescription:typeof a.message==="string"?a.message:String(a),errorName:typeof a.name==="string"?a.name:"PlayRejectedError"};return b}function m(a){__p&&__p();if(!a.getTimeRange||!a.getTimeRange())return null;var b=a.getTimeRange(),c=b.endTime;b=b.startTime;var d=c-b,e=null,f=null,g=null,h=null;if(a.getByteRange){a=a.getByteRange();a&&(f=a.startByte,g=a.endByte,h=g-f)}return{byteSize:h,debugInfo:e,endByte:g,endTime:c,segmentLength:d,startByte:f,startTime:b}}function d(a,c){__p&&__p();c=c.event;var d=c.segment;c=c.type;d=m(d);if(d==null)return;c=c==="a"?i:l;if(a[c].length===0){a[c].push(d);return}var e=b("BinarySearch").findBoundInArray(a[c],d,function(a,b){return a.startTime-b.startTime},b("BinarySearch").LEAST_UPPER_BOUND);a[c].splice(e,0,d)}function f(a,b,c){b=b.event;var d=b.sourceBuffer;b=b.type;b=b==="a"?h:k;a[b]=d;a[j]=c!=null?c:null}function n(a){var b=a.debugTools,c=a.isAbrEnabled;a=a.state;var d=a.controlledState,e=d.activeCaptions,f=d.availableQualities,g=d.captionsLoaded,h=d.captionsVisible,i=d.error,j=d.inbandCaptionsAutogenerated,k=d.lastMuteReason,l=d.lastPauseReason,m=d.lastPlayReason,n=d.muted,o=d.playbackState,p=d.seeking,q=d.seekTargetPosition,r=d.selectedVideoQuality,s=d.targetAudioQuality,t=d.targetVideoQuality;d=d.volume;var u=o==="ended",v=o==="paused"||u,w=o==="playing",x=o==="inPlayStalling";o=o==="stalling"||x;b={VideoStateDebugApiTools:b,activeCaptions:e,availableVideoQualities:f,bufferEnd:(b=a.uncontrolledState.videoElementLastBufferEndPosition)!=null?b:0,captionsLoaded:g,captionsVisible:h,currentVideoQuality:(e=a.uncontrolledState.currentPlayingVideoQuality)!=null?e:"",duration:(f=a.uncontrolledState.videoElementDuration)!=null?f:0,ended:u,error:i,inPlayStalling:x,inbandCaptionsAutogenerated:j,isAbrEnabled:c,lastMuteReason:k,lastPauseReason:l,lastPlayReason:m,muted:n,paused:v,playerImplementationName:a.playerImplementationName,playerVersion:a.playerVersion,playing:w,seekTargetPosition:q,seeking:p,selectedVideoQuality:r,stalling:o,targetAudioQuality:s,targetVideoQuality:t,volume:d};return b}e.exports={createVideoPlayerErrorFromHTMLVideoElementError:a,createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason:c,createVideoPlayerImplementationExposedState:n,getSegmentData:m,insertSegment:d,insertSourceBuffer:f}}),null);
__d("VideoPlayerImplementationStateMachine",["VideoPlayerImplementationHelper","gkx","recoverableViolation","shallowEqual","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerImplementationHelper").createVideoPlayerErrorFromHTMLVideoElementError;function h(a){var b=a.bufferingDetected,c=a.seeking;a=a.waitingForDomPlaying;return!b&&!c&&!a}function i(a){__p&&__p();var c=a.bufferingDetected,d=a.prevPlaybackState,e=a.seeking;a=a.waitingForDomPlaying;c=h({bufferingDetected:c,seeking:e,waitingForDomPlaying:a});e=d;switch(d){case"stalling":e=c?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:d;b("recoverableViolation")("unexpected playbackState: "+d,"comet_video_player");break}return e}function j(a,c,d){__p&&__p();switch(d.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":return babelHelpers["extends"]({},a,{hostCallQueue:a.hostCallQueue.concat([d])});case"dom_event_ended":return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":if(a.playbackState==="ended")return a;if(c.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":c=a.playbackState;var e=c;switch(c){case"playing":case"stalling":case"ended":case"paused":e="stalling";break;default:c;b("recoverableViolation")("unexpected playbackState: "+c,"comet_video_player");break}c=!0;return babelHelpers["extends"]({},a,{playbackState:e,waitingForDomPlaying:c});case"dom_event_playing":e=a.bufferingDetected;c=a.seeking;var f=!1,h=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:i({bufferingDetected:e,prevPlaybackState:h,seeking:c,waitingForDomPlaying:f}),waitingForDomPlaying:f});case"dom_event_seeking":e=a.playbackState;h=e;switch(e){case"paused":case"ended":break;case"stalling":case"playing":h="stalling";break;default:e,b("recoverableViolation")("unexpected playbackState: "+e,"comet_video_player")}return babelHelpers["extends"]({},a,{playbackState:h,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":c=a.bufferingDetected;f=a.waitingForDomPlaying;e=!1;h=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:i({bufferingDetected:c,prevPlaybackState:h,seeking:e,waitingForDomPlaying:f}),seeking:e});case"dom_event_error":c=g({hostCallError:null,videoElementError:d.payload.videoElementError,videoElementNetworkState:d.payload.videoElementNetworkState,videoElementReadyState:d.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:c,playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:d.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return a.hostCallPlayIDLast!==d.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":return a.hostCallPlayIDLast!==d.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null,playbackState:a.playbackState==="stalling"?"paused":a.playbackState,waitingForDomPlaying:!1});case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},a,{hostCallQueue:[]});case"implementation_host_call_failed":h=g({hostCallError:d.payload.hostCallError,videoElementError:d.payload.videoElementError,videoElementNetworkState:d.payload.videoElementNetworkState,videoElementReadyState:d.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:h,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_video_node_unmounted":return a;case"implementation_engine_initialized":return babelHelpers["extends"]({},a,{availableQualities:d.payload.availableQualities,selectedVideoQuality:d.payload.selectedVideoQuality,targetVideoQuality:d.payload.targetVideoQuality});case"implementation_engine_destroyed":return a;case"implementation_engine_error":return babelHelpers["extends"]({},a,{error:d.payload.implementationError,playbackState:"paused",waitingForDomPlaying:!1});case"representation_changed":return babelHelpers["extends"]({},a,{targetVideoQuality:d.payload.targetVideoQuality});case"controller_pause_requested":return a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{lastPauseReason:d.payload.reason,playbackState:"paused",waitingForDomPlaying:!1});case"controller_play_requested":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{lastPlayReason:d.payload.reason,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},a,{seekTargetPosition:d.payload.seekTargetPosition,seeking:!0});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedVideoQuality:d.payload.selectedVideoQuality});case"controller_muted_requested":return babelHelpers["extends"]({},a,{lastMuteReason:d.payload.reason,muted:d.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:d.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!1,seekTargetPosition:d.payload.seekTargetPosition,seeking:d.payload.seekTargetPosition!=null});case"buffering_begin_requested":f=a.playbackState;e=f;switch(f){case"paused":case"ended":break;case"playing":case"stalling":e="stalling";break;default:f;b("recoverableViolation")("unexpected playbackState: "+f,"comet_video_player");break}return babelHelpers["extends"]({},a,{bufferingDetected:!0,playbackState:e});case"buffering_end_requested":c=a.seeking;h=a.waitingForDomPlaying;f=!1;e=a.playbackState;return babelHelpers["extends"]({},a,{bufferingDetected:f,playbackState:i({bufferingDetected:f,prevPlaybackState:e,seeking:c,waitingForDomPlaying:h})});case"controller_set_captions_visible_requested":f=d.payload.captionsVisible;return a.captionsVisible===f?a:babelHelpers["extends"]({},a,{activeCaptions:f?a.activeCaptions:null,captionsVisible:f});case"controller_set_active_captions_requested":e=d.payload.activeCaptions;h=(c=e==null?void 0:e.rows)!=null?c:[];f=a.activeCaptions;var j=(c=f==null?void 0:f.rows)!=null?c:[];return j.length===h.length&&h.every(function(a,b){return j[b]===a})?a:babelHelpers["extends"]({},a,{activeCaptions:e});case"captions_loaded_changed":f=d.payload.captionsLoaded;return a.captionsLoaded===f?a:babelHelpers["extends"]({},a,{activeCaptions:f?a.activeCaptions:null,captionsLoaded:f});case"inband_captions_autogenerated_changed":c=d.payload.inbandCaptionsAutogenerated;return a.inbandCaptionsAutogenerated===c?a:babelHelpers["extends"]({},a,{inbandCaptionsAutogenerated:c});default:return a}}function k(a,c,d){var e=c.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!b("shallowEqual")(e,a.uncontrolledState);c=j(a.controlledState,e,c);var f=!b("shallowEqual")(c,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?c:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var l,m;function n(a,c,d){__p&&__p();var e=d,f=e,g=0,h=!1;return{dispatch:function(d){__p&&__p();if(g>10)if(!h){h=!0;throw b("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}else return;try{++g;var e=c(),i=f;e=k(i,d,e);f=e;a(i,e,d)}finally{--g}},getCurrentState:function(){return f},getInitialState:function(){return e}}}var o,p;function a(a,b,c){function d(a,c,d){try{var e=!0,f=0;while(e&&f<b.length){var g=b[f];e=g(a,c,d);++f}}finally{}}return n(d,a,c)}function c(a,b){__p&&__p();function c(){}function d(a){return a}function e(c){return function(e){e=d(e.currentTarget);b(e);a.dispatch(c)}}return{onAbort:c,onCanPlay:c,onCanPlayThrough:c,onDurationChange:e({type:"dom_event_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:e({type:"dom_event_ended"}),onError:function(c){c=d(c.currentTarget);b(c);a.dispatch({payload:{videoElementError:c.error,videoElementNetworkState:c.networkState,videoElementReadyState:c.readyState},type:"dom_event_error"})},onLoadStart:c,onLoadedData:c,onLoadedMetadata:c,onPause:e({type:"dom_event_pause"}),onPlay:e({type:"dom_event_play"}),onPlaying:e({type:"dom_event_playing"}),onProgress:e({type:"dom_event_progress"}),onRateChange:e({type:"dom_event_ratechange"}),onSeeked:e({type:"dom_event_seeked"}),onSeeking:e({type:"dom_event_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:e({type:"dom_event_timeupdate"}),onVolumeChange:e({type:"dom_event_volumechange"}),onWaiting:e({type:"dom_event_waiting"})}}e.exports={createReactVideoElementCallbacksForStateMachine:c,createVideoPlayerImplementationStateMachine:n,createVideoPlayerImplementationStateMachineWithEffects:a}}),null);
__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(){return"id-vpdom-"+b("cometUniqueID")()}function i(a){__p&&__p();var c=a.engineExtrasAPI,d=a.hostCall,e=a.machine;a=a.videoElementAPI;switch(d.type){case"host_call_play":var f=a.play();f&&(e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_created"}),b("promiseDone")(f.then(function(){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(a){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID,playPromiseRejectionReason:a},type:"dom_event_play_promise_rejected"})})));break;case"host_call_pause":a.pause();break;case"host_call_set_playback_rate":a.setPlaybackRate(d.payload.playbackRate);break;case"host_call_set_muted":a.setMuted(d.payload.muted);break;case"host_call_set_volume":a.setVolume(d.payload.volume);break;case"host_call_set_current_time":a.setPlayheadPosition(d.payload.currentTime);break;case"host_call_set_video_quality":c.setUserSelectedVideoQuality(d.payload.selectedVideoQuality);break;default:d.type;return!1}return!0}function j(a){__p&&__p();var b=a.engineExtrasAPI,c=a.hostCall,d=a.machine;a=a.videoElementAPI;if(!a||!b)d.dispatch(c);else{var e=!1;try{e=i({engineExtrasAPI:b,hostCall:c,machine:d,videoElementAPI:a})}catch(b){d.dispatch({payload:{hostCall:c,hostCallError:b,videoElementError:a.getError(),videoElementNetworkState:a.getNetworkState(),videoElementReadyState:a.getReadyState()},type:"implementation_host_call_failed"})}e&&d.dispatch({payload:{hostCall:c},type:"implementation_host_call_applied"})}}function k(a){__p&&__p();var b=[];function c(){b=b.filter(function(a){return a.type!=="host_call_play"&&a.type!=="host_call_pause"})}function d(a){b=b.filter(function(b){return b.type!==a})}a.forEach(function(a){__p&&__p();switch(a.type){case"host_call_play":c();break;case"host_call_pause":c();break;case"host_call_set_playback_rate":d(a.type);break;case"host_call_set_muted":d(a.type);break;case"host_call_set_volume":d(a.type);break;case"host_call_set_current_time":d(a.type);break;case"host_call_set_video_quality":d(a.type);break;default:a.type}b=b.concat([a])});return b}function a(a){var b=a.engineExtrasAPI,c=a.machine,d=a.reason,e=a.state,f=a.videoElementAPI;a=[{payload:{hostCallID:h(),reason:d,volume:e.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:h(),muted:e.controlledState.muted,reason:d},type:"host_call_set_muted"},{payload:{hostCallID:h(),reason:d,selectedVideoQuality:e.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"}];d=k(e.controlledState.hostCallQueue.concat(a));d.forEach(function(a){j({engineExtrasAPI:b,hostCall:a,machine:c,videoElementAPI:f})});c.dispatch({payload:{hostCallsFlushed:d},type:"implementation_host_call_queue_flushed"})}e.exports={applyOrQueueHostCall:j,flushHostCallQueue:a,makeHostCallID:h}}),null);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["convertToViewabilityPercentage"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.engineExtrasAPI,d=a.fullscreenControllerRef,e=a.videoElementAPI;a=a.videoPlayerPassiveViewabilityInfoRef;if(e==null){var f={clockTimestamp:Date.now(),currentPlayingVideoQuality:void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0};return f}f=e.getPlayheadPosition();d={clockTimestamp:Date.now(),currentPlayingVideoQuality:c?c.getCurrentPlayingVideoQuality():void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,videoElementDroppedFrameCount:e.getDroppedFrameCount(),videoElementDuration:e.getDuration(),videoElementEnded:e.getEnded(),videoElementError:e.getError(),videoElementLastBufferEndPosition:e.getLastBufferEndPosition(),videoElementMuted:e.getMuted(),videoElementNetworkState:e.getNetworkState(),videoElementPaused:e.getPaused(),videoElementPlaybackRate:e.getPlaybackRate(),videoElementPlayheadPosition:f,videoElementReadyState:e.getReadyState(),videoElementTotalFrameCount:e.getTotalFrameCount(),videoElementVolume:e.getVolume(),videoRepresentationID:c?c.getVideoRepresentationIDAtTime(f):void 0,viewabilityPercentage:a&&a.current?b("convertToViewabilityPercentage")(a.current.getCurrent().visiblePercentage):void 0};return d}e.exports={createVideoPlayerImplementationStateMachineStateUncontrolledState:a}}),null);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(a,b,c,d,e,f){"use strict";var g=b("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState;function a(a){var b=a.alwaysShowCaptions,c=a.playerImplementationName,d=a.playerVersion;a=a.streamingFormat;var e=!0,f=1,h=g({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoPlayerPassiveViewabilityInfoRef:{current:null}});return{controlledState:{activeCaptions:null,availableQualities:[],bufferingDetected:!1,captionsLoaded:!1,captionsVisible:b,error:null,hostCallPlayIDLast:null,hostCallQueue:[],inbandCaptionsAutogenerated:!1,lastMuteReason:null,lastPauseReason:null,lastPlayReason:null,muted:e,playbackState:"paused",scrubbing:!1,seekTargetPosition:null,seeking:!1,selectedVideoQuality:"notselected",targetAudioQuality:"",targetPlaybackRate:1,targetVideoQuality:"",volume:f,waitingForDomPlaying:!1},playerImplementationName:c,playerVersion:d,streamingFormat:a,uncontrolledState:h}}e.exports={createVideoPlayerImplementationStateMachineInitialState:a}}),null);
__d("VideoPlayerVersions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HTML5:"html5",PLEASANTVILLE:"pleasantville",REACT:"react",REACT_PLEASANTVILLE:"react_pleasantville",REACT_SILVERCITY:"react_silvercity",SILVERCITY:"silvercity",OZ:"oz",REACT_OZ:"react_oz",COMET_OZ:"comet_oz",COMET_PROGRESSIVE:"comet_progressive",OLD_API_EXO:"old_api_exo",OLD_API_EXO_DEPRECATED:"old_api_exo_deprecated",OLD_API_EXO_NEW_LIB:"old_api_exo_new_lib",OLD_API_PSR:"old_api_psr",HEROPLAYER:"heroplayer",HEROPLAYER2:"heroplayer2",HEROPLAYER_GROOT_ELIGIBLE:"heroplayer_groot_eligible",HEROPLAYER2_GROOT_ELIGIBLE:"heroplayer2_groot_eligible",HEROPLAYER_CORE_PLUGINS:"heroplayer_only_core_plugins",HEROPLAYER_NON_CORE_PLUGINS:"heroplayer_other_plugins",HEROPLAYER2_CORE_PLUGINS:"heroplayer2_only_core_plugins",HEROPLAYER2_NON_CORE_PLUGINS:"heroplayer2_other_plugins",GROOTPLAYER:"grootplayer",GROOT:"groot",FNF:"fnf",LEGACY:"legacy",REFACTORED:"refactored",MBASIC:"mbasic",MTOUCH_SHAKA_LIVE:"mtouch_shaka_live",MTOUCH_SPHERICAL:"mtouch_360",MTOUCH_OZ:"mtouch_oz",CASTING_DEBUG:"casting_debug",CHROMECAST:"chromecast",WEBAPIS_AVPLAY:"webapis_avplay",FBLITE_LEGACY:"fblite_legacy",FBLITE_SURFACE:"fblite_surface",FBLITE_TEXTURE:"fblite_texture",HERO_SURFACE:"hero_surface",HERO_TEXTURE:"hero_texture",UNKNOWN:"unknown"})}),null);
__d("VideoPlayerImplementationStateMachineForOzImplementation",["VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerVersions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithEffects,h=b("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall,i=b("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue,j=b("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID,k=b("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState,l=b("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState;function m(a,b){if(a===null&&b===null)return!1;if(a===null||b===null)return!0;var c=(b=b.rows)!=null?b:[];a=(b=a.rows)!=null?b:[];return a.length!==c.length||a.some(function(a,b){return a!==c[b]})}function a(a){__p&&__p();var b=a.alwaysShowCaptions,c=a.ensureEngineExtrasAPI,d=a.ensureVideoElementAPI,e=a.fullscreenControllerRef,f=a.getEngineExtrasAPIMaybe,n=a.getVideoElementAPIMaybe,o=a.getVideoPlayerCaptionsControllerMaybe,p=a.onStateMachine;a.ozPlayerPartsRef;var q=a.updateLoopStateOnImplementationEndedRef,r=a.videoPlayerPassiveViewabilityInfoRef;function s(a){h({engineExtrasAPI:f(),hostCall:a,machine:t,videoElementAPI:n()})}a=[function(a,b,c){p(a,b,c);return!0},function(a,b,e){if(!(e.type==="implementation_engine_initialized"))return!0;a=d();var f=c();e=e.type;i({engineExtrasAPI:f,machine:t,reason:e,state:b,videoElementAPI:a});return!1},function(a,b,c){if(!(c.type==="dom_event_ended"))return!0;a=q.current;a();return!1},function(a,b,c){if(!(c.type==="controller_pause_requested"))return!0;a=b.controlledState.playbackState;if(!(a==="paused"))return!1;s({payload:{hostCallID:j(),reason:c.type},type:"host_call_pause"});return!1},function(a,b,c){if(!(c.type==="controller_play_requested"))return!0;a=b.controlledState.playbackState;if(!(a==="stalling"))return!1;s({payload:{hostCallID:j(),reason:c.type},type:"host_call_play"});return!1},function(a,b,c){if(!(c.type==="controller_seek_requested"))return!0;a=b.controlledState;b=a.seeking;a=a.seekTargetPosition;b&&a!=null&&s({payload:{currentTime:a,hostCallID:j(),reason:c.type},type:"host_call_set_current_time"});return!1},function(a,b,c){if(!(c.type==="controller_muted_requested"))return!0;a=b.controlledState.muted;if(!(a===c.payload.muted))return!1;s({payload:{hostCallID:j(),muted:a,reason:c.type},type:"host_call_set_muted"});return!1},function(a,b,c){if(!(c.type==="controller_scrub_begin_requested"))return!0;s({payload:{hostCallID:j(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="controller_scrub_end_requested"))return!0;a=b.controlledState;b=a.seeking;var d=a.seekTargetPosition;a=a.targetPlaybackRate;b&&d!=null?(s({payload:{hostCallID:j(),playbackRate:a,reason:c.type+":seek"},type:"host_call_set_playback_rate"}),s({payload:{currentTime:d,hostCallID:j(),reason:c.type+":seek"},type:"host_call_set_current_time"})):s({payload:{hostCallID:j(),playbackRate:a,reason:c.type+":cancel"},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="buffering_begin_requested"))return!0;s({payload:{hostCallID:j(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="buffering_end_requested"))return!0;s({payload:{hostCallID:j(),playbackRate:b.controlledState.targetPlaybackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(!(c.type==="controller_volume_requested"))return!0;s({payload:{hostCallID:j(),reason:c.type,volume:b.controlledState.volume},type:"host_call_set_volume"});return!1},function(a,b,c){if(!(c.type==="controller_quality_requested"))return!0;s({payload:{hostCallID:j(),reason:c.type,selectedVideoQuality:b.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"});return!1},function(a,b,c){__p&&__p();if(!(c.type==="dom_event_timeupdate"||c.type==="captions_loaded_changed"))return!0;c=o();var d=b.controlledState.captionsVisible;if(c&&d&&b.controlledState.captionsLoaded){d=n();b=c.handleTimeUpdate(d?d.getPlayheadPosition():0);c=a.controlledState.activeCaptions;m(c,b)&&t.dispatch({payload:{activeCaptions:b},type:"controller_set_active_captions_requested"})}return!1}];var t=g(function(){var a=n(),b=f();return l({engineExtrasAPI:b,fullscreenControllerRef:e,videoElementAPI:a,videoPlayerPassiveViewabilityInfoRef:r})},a,k({alwaysShowCaptions:b,playerImplementationName:"oz_v2",playerVersion:"comet_oz",streamingFormat:"dash"}));return t}e.exports={createVideoPlayerImplementationStateMachineForOzImplementation:a}}),null);
__d("VideoPlayerOzImplementationEngineExtrasAPI",["gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(a){return a.getCurrentQuality()}function i(a){return h(a)}function j(a){a=a.getIsVideoQualityAdaptationEnabled()?"auto":a.getCurrentQuality();return a}function k(a,b){__p&&__p();var c=j(a);if(b==="notselected"||b===c)return!1;else if(b==="auto"){a.enableVideoQualityAdaptation();return!0}else if(b!==a.getCurrentQuality()){c=b;a.switchToVideoQuality(c);return!0}else return!1}function a(a){__p&&__p();var b={getAudioRepresentationIDAtTime:function(b){return(b=a.getAudioRepresentationIDAtTime(b))!=null?b:null},getAvailableVideoQualities:function(){return a.getVideoQualities()},getCurrentAudioRepresentation:function(){var b;return(b=a.getCurrentAudioRepresentation())!=null?b:null},getCurrentPlayingVideoQuality:function(){return i(a)},getCurrentTargetVideoQuality:function(){return h(a)},getCurrentVideoRepresentation:function(){var b;return(b=a.getCurrentVideoRepresentation())!=null?b:null},getInbandCaptionsAutogeneratedFromManifest:function(){var b=a.getMpd();return Boolean(b.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var b=a.getMpd();return Boolean(b.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(b.getCustomField("hasInbandCaptionsFromAccessibility"))},getStreamType:function(){return"dash"},getUserSelectedVideoQuality:function(){return j(a)},getVideoRepresentationIDAtTime:function(b){return(b=a.getVideoRepresentationIDAtTime(b))!=null?b:null},isDrm:function(){return a.isDrm()},setUserSelectedVideoQuality:function(b){k(a,b)}};return b}e.exports={createVideoPlayerOzImplementationEngineExtrasAPI:a}}),null);
__d("VideoPlayerBanzaiLogFlusher",["Banzai","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="video_player";a=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.flushLogs=function(){var a=this.$1.consumeLoggerEvents();a.forEach(function(a){var c={event:a.eventType,logData:a.logData,routeTracePolicy:a.routeTracePolicy,source:a.subOrigin};a=(a=a.logData)==null?void 0:a.ad_client_token;b("gkx")("1107827")?b("Banzai").post(g,c,b("Banzai").VITAL):a!=null?b("Banzai").post(g,c,b("Banzai").VITAL):b("Banzai").post(g,c)})};return a}();e.exports=a}),null);
__d("VideoPlayerImplementationStateMachineLogger",["VideoPlayerLoggerEvent","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange,h=6e4,i,j,k;function l(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,dontLogPauseOnUnpausedSeeking:!1,hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,isLoggingScrubbingSequence:!1,lastLoggedFullscreenState:!1,lastLoggedPlayerFormat:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedRepresentation:null,nextHeartbeatTime:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallStartTimestamp:0,stallTotalDuration:0,vplEventSequenceNumber:0}}function m(a,b){return b==="muted"||b==="unmuted"||b==="started_playing"||b==="caption_change"||b==="unpaused"?a.controlledState.captionsVisible?"on":"off":void 0}function a(a){__p&&__p();var c=new Map(),d=a.initialLoggingMetaData,e=[],f=l(),i=new Set(b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);function j(a){var b=f.stallStartTimestamp;if(b>0){f.stallCount+=1;a=a-b;f.stallTotalDuration+=a;f.stallCount200ms+=a>200?1:0}}function k(a,b){__p&&__p();a=a.uncontrolledState.videoElementPlayheadPosition==null?null:a.uncontrolledState.videoElementPlayheadPosition;var c=null;switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"representation_ended":c=f.lastStartTimePosition;break;case"scrubbed":c=a;break;default:break}switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":f.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"representation_ended":f.lastStartTimePosition=a;break;default:break}return{video_last_start_time_position:c}}function n(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.playbackState;var d=b.controlledState.playbackState;a!=="stalling"&&d==="stalling"&&(f.stallStartTimestamp=c);a==="stalling"&&d!=="stalling"&&(j(b.uncontrolledState.clockTimestamp),f.stallStartTimestamp=0)}function o(a,b,c){__p&&__p();var d={stall_count:null,stall_count_200_ms:null,stall_time:null},e=b.uncontrolledState.clockTimestamp,g=function(){var a={stall_count:f.stallCount,stall_count_200_ms:f.stallCount200ms,stall_time:f.stallTotalDuration};f.stallCount=0;f.stallCount200ms=0;f.stallTotalDuration=0;f.stallStartTimestamp=0;return a};a=a.controlledState.playbackState;var h=b.controlledState.playbackState;a!=="stalling"&&h==="stalling"&&(f.stallStartTimestamp=e);switch(c){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"representation_ended":j(b.uncontrolledState.clockTimestamp);d=g();break;case"heart_beat":b.controlledState.playbackState!=="stalling"&&(j(b.uncontrolledState.clockTimestamp),d=g());break;default:break}return d}function p(a){a=a.controlledState.playbackState;switch(a){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:a;return"unknown"}}function q(g){__p&&__p();var h=g.eventType,j=g.logDataOverrides,l=g.prevState;g=g.state;var n=k(g,h);n=n.video_last_start_time_position;l=o(l,g,h);var q=l.stall_count,r=l.stall_count_200_ms;l=l.stall_time;var s=[],t=a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplayGatingResult;t&&s.push(t);t=h==="entered_fs"?!0:h==="exited_fs"?!1:f.lastLoggedFullscreenState;var u=b("getPlayerFormatForLogData")(t,d.coreVideoPlayerMetaData.playerFormat);r={ad_client_token:d.coreVideoPlayerMetaData.adClientToken,autoplay_eligible:a.initialLoggingMetaData.coreVideoPlayerMetaData.canAutoplay,autoplay_failure_reasons:JSON.stringify(s),autoplay_setting:a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplaySetting,broadcaster_origin:a.initialLoggingMetaData.coreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:b("getVideoBrowserTabId")(),caption_state:m(g,h),current_viewability_percentage:g.uncontrolledState.viewabilityPercentage,dropped_frame_count:g.uncontrolledState.videoElementDroppedFrameCount,external_log_id:d.coreVideoPlayerMetaData.externalLogID,external_log_type:d.coreVideoPlayerMetaData.externalLogType,last_viewability_percentage:f.lastLoggedViewabilityPercentage,playback_duration:g.uncontrolledState.videoElementDuration,playback_is_live_streaming:a.initialLoggingMetaData.coreVideoPlayerMetaData.isLiveStreaming,player_format:u,player_instance_key:d.instanceKey,player_state:p(g),player_version:g.playerVersion,representation_id:g.uncontrolledState.videoRepresentationID,stall_count:q,stall_count_200_ms:r,stall_time:l,streaming_format:g.streamingFormat,total_frame_count:g.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:a.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:a.initialLoggingMetaData.trackingNodes,video_id:d.coreVideoPlayerMetaData.videoFBID,video_last_start_time_position:n,video_play_reason:g.controlledState.lastPlayReason,video_player_height:(s=d.dimensions)==null?void 0:s.height,video_player_width:(q=d.dimensions)==null?void 0:q.width,video_time_position:g.uncontrolledState.videoElementPlayheadPosition};l={event_seq_num:++f.vplEventSequenceNumber,seq_num:i.has(h)?++f.sequenceNumber:null,time_ms:Date.now()};var v={};c.forEach(function(a,b){v[b]=a});n=babelHelpers["extends"]({},v,r,j,l);q=(s=f.initialSuborigin)!=null?s:d.coreVideoPlayerMetaData.subOrigin;r=(g=d.coreVideoPlayerMetaData.initialTracePolicy)!=null?g:d.coreVideoPlayerMetaData.routeTracePolicy;e.push({eventType:h,logData:n,routeTracePolicy:r,subOrigin:q});f.initialSuborigin==null&&q!=null&&(f.initialSuborigin=q);f.lastLoggedFullscreenState=t;f.lastLoggedPlayerFormat=u}var r={};function s(a,c,d){q({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},d,{state:f.hasLoggedStartedPlaying?b("VideoPlayerLoggerPlayerStates").UNPAUSED:b("VideoPlayerLoggerPlayerStates").STARTED}),prevState:a,state:c});f.hasPendingRequestedPlaying=!0;f.canLogPausedOrFinishedPlaying=!0;return r}function t(a,b,c){__p&&__p();if(!f.canLogPausedOrFinishedPlaying)return r;else if(f.hasPendingRequestedPlaying){u(a,b,c);f.canLogPausedOrFinishedPlaying=!1;f.hasPendingRequestedPlaying=!1;return r}else{q({eventType:"paused",logDataOverrides:c,prevState:a,state:b});f.canLogPausedOrFinishedPlaying=!1;f.hasPendingRequestedPlaying=!1;return r}}function u(a,c,d){d=babelHelpers["extends"]({},d,{state:f.hasLoggedStartedPlaying?b("VideoPlayerLoggerPlayerStates").UNPAUSED:b("VideoPlayerLoggerPlayerStates").STARTED});q({eventType:"cancelled_requested_playing",logDataOverrides:d,prevState:a,state:c});return r}function v(a,b,c){if(c.type==="dom_event_play_promise_rejected"&&f.hasPendingRequestedPlaying){c=c.payload.playPromiseRejectionReason;if(c!=null&&c.name==="NotAllowedError"){u(a,b,{debug_reason:"not_allowed"});return r}else return r}else return r}function w(a,b,c){if((c.type==="controller_play_requested"||c.type==="dom_event_play"&&!f.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==b.controlledState.playbackState){s(a,b);return r}else return r}function x(a,b,c){if(a.controlledState.playbackState==="stalling"&&b.controlledState.playbackState==="playing"&&f.canLogPlayingEvent){c=f.hasLoggedStartedPlaying?"unpaused":"started_playing";q({eventType:c,prevState:a,state:b});f.hasLoggedStartedPlaying=!0;f.canLogPlayingEvent=!1;f.hasPendingRequestedPlaying=!1;return r}else return r}function y(a,b,c){__p&&__p();var d=b.controlledState.playbackState,e=a.controlledState.playbackState;if(c.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){t(a,b);f.isLoggingScrubbingSequence=!0;return r}else if(!a.controlledState.seeking&&b.controlledState.seeking&&!f.isLoggingScrubbingSequence&&d!=="paused"&&d!=="ended"&&!f.hasPendingRequestedPlaying){t(a,b);f.shouldLogRequestedPlayingForScrub=!0;return r}else if(c.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){s(a,b,{video_time_position:c.payload.seekTargetPosition});return r}else if(a.controlledState.seeking&&!b.controlledState.seeking){f.shouldLogRequestedPlayingForScrub&&d!=="paused"&&d!=="ended"&&s(a,b);q({eventType:"scrubbed",prevState:a,state:b});f.isLoggingScrubbingSequence=!1;f.shouldLogRequestedPlayingForScrub=!1;e!=="paused"&&e!=="ended"&&(f.canLogPlayingEvent=!0);return r}else return r}function z(a,b,c){if(a.controlledState.playbackState!==b.controlledState.playbackState&&b.controlledState.playbackState==="ended"&&f.canLogPausedOrFinishedPlaying){q({eventType:"finished_playing",prevState:a,state:b});f.canLogPausedOrFinishedPlaying=!1;return r}else return r}function A(a,b,c){if((c.type==="controller_pause_requested"||c.type==="dom_event_pause"&&!f.shouldIgnoreDomPause)&&a.controlledState.playbackState!==b.controlledState.playbackState){t(a,b);return r}else return r}function B(a,b,c){var d=b.controlledState.playbackState;if(c.type==="implementation_unmounted"&&d!=="paused"&&d!=="ended"){t(a,b,{debug_reason:"unloaded"});return r}else return r}function C(a,c,d){__p&&__p();d=c.controlledState.muted;var e=c.controlledState.volume,f=a.controlledState.muted,h=a.controlledState.volume;d=g({currMuted:d,currVolume:e,prevMuted:f,prevVolume:h});f={current_volume:Math.round(e*100)};switch(d){case"muted":q({eventType:"muted",logDataOverrides:f,prevState:a,state:c});return r;case"unmuted":q({eventType:"unmuted",logDataOverrides:f,prevState:a,state:c});return r;case null:if(h<e){q({eventType:"volume_increase",logDataOverrides:f,prevState:a,state:c});return r}else if(h>e){q({eventType:"volume_decrease",logDataOverrides:f,prevState:a,state:c});return r}else return r;default:d;b("recoverableViolation")('Unexpected mutedStateChange "'+d+'"',"comet_video_player");return r}}function D(a,b,c){__p&&__p();c=b.uncontrolledState.videoRepresentationID;var d=f.lastTrackedRepresentation,e=b.controlledState.playbackState,g=b.controlledState.seeking;if(!g&&e!=="paused"&&e!=="ended"&&d!=null&&d!==c){q({eventType:"representation_ended",logDataOverrides:{next_representation_id:c,representation_id:d},prevState:a,state:b});f.lastTrackedRepresentation=c;return r}else if(d==null){f.lastTrackedRepresentation=c;return r}else return r}function E(a,b,c){c=b.controlledState.playbackState;c==="paused"||c==="ended"?f.nextHeartbeatTime=null:c!=="stalling"&&f.nextHeartbeatTime==null&&(f.nextHeartbeatTime=Date.now()+h);var d=f.nextHeartbeatTime;if(d!=null){var e=Date.now();e>=d&&(c!=="stalling"&&q({eventType:"heart_beat",prevState:a,state:b}),f.nextHeartbeatTime=e+h)}return r}function F(a,b,c){if(c.type==="implementation_mounted"){q({eventType:"player_loaded",prevState:a,state:b});return r}else return r}function G(a,b,c){q({eventType:c?"entered_fs":"exited_fs",prevState:a,state:b})}function H(a,b,c){__p&&__p();if(c.type!=="notify_fullscreen_changed")return r;c=f.lastLoggedFullscreenState;var d=b.uncontrolledState.isFullscreen;if(c!==!0&&d===!0){G(a,b,d);return r}else if(c===!0&&d===!1){G(a,b,d);return r}else return r}function I(a,b,c){c=b.controlledState.playbackState;var d=f.lastLoggedViewabilityPercentage,e=b.uncontrolledState.viewabilityPercentage;if(c!=="paused"&&c!=="ended"&&d!=null&&d!==e){q({eventType:"viewability_changed",prevState:a,state:b});f.lastLoggedViewabilityPercentage=e;return r}else return r}function J(a,b,c){if(c.type==="controller_set_captions_visible_requested"){q({eventType:"caption_change",prevState:a,state:b});return r}else return r}return{consumeLoggerEvents:function(){return e.splice(0)},handleMetaData:function(a){var b=a.coreVideoPlayerMetaData.initialTracePolicy!==d.coreVideoPlayerMetaData.initialTracePolicy;d=a},handleStateMachine:function(a,b,c){__p&&__p();var d=b.controlledState.playbackState;n(a,b);var e=[H,I,v,w,y,x,z,A,C,B,F,J,D,E];e.forEach(function(d){d(a,b,c)});(d==="paused"||d==="ended")&&(f.canLogPlayingEvent=!0);c.type==="controller_pause_requested"&&(f.hasPausedOnce=!0,f.shouldIgnoreDomPause=!0);c.type==="controller_play_requested"&&(f.hasPausedOnce=!0,f.shouldIgnoreDomPlay=!0);c.type==="dom_event_pause"&&(f.shouldIgnoreDomPause=!1);c.type==="dom_event_play"&&(f.shouldIgnoreDomPlay=!1,f.lastLoggedViewabilityPercentage=b.uncontrolledState.viewabilityPercentage)},setAdditionalLogData:function(a,b){c.set(a,b)}}}e.exports={HEARTBEAT_INTERVAL:h,createVideoPlayerImplementationStateMachineLogger:a}}),null);
__d("useGetDerivedStateFromProps",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useState;function a(a,b){var c=g(a),d=c[0];c=c[1];var e=g(null),f=e[0];e=e[1];b(f)&&(c(a),e(a));return d}e.exports=a}),null);
__d("VideoPlayerOzImplementationV2.react",["BanzaiODS","BudgetProduct","HTML5OzDrmHelper","OzCustomParsers","OzCustomRepresentationParsers","React","RunComet","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerDataSource","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationHelper","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineForOzImplementation","VideoPlayerImplementationStateMachineLogger","VideoPlayerOzImplementationEngineExtrasAPI","gkx","killswitch","oz-player","oz-player/strategies/OzBufferingDetector","oz-player/utils/OzError","recoverableViolation","removeFromArray","requestManifest","stylex","unrecoverableViolation","useConcurrentAutoplayManagementAPI","useGetDerivedStateFromProps","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("OzCustomParsers").createOzCustomParser,h=b("OzCustomRepresentationParsers").createOzCustomRepresentationParsers,i=(c=b("React")).useCallback,j=c.useEffect,k=c.useMemo,l=c.useRef,m=c.useState,n=b("VideoPlayerCaptionsController").createCaptionsController,o=b("VideoPlayerDataSource").createDataSource,p=b("VideoPlayerDataSource").notifyAllDataSourceHandlers,q=b("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI,r=b("VideoPlayerImplementationHelper").createVideoPlayerImplementationExposedState,s=b("VideoPlayerImplementationHelper").insertSegment,aa=b("VideoPlayerImplementationHelper").insertSourceBuffer,t=b("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine,u=b("VideoPlayerImplementationStateMachineForOzImplementation").createVideoPlayerImplementationStateMachineForOzImplementation,v=b("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger,ba=b("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI,ca=b("useConcurrentAutoplayManagementAPI").useConcurrentAutoplayManagementAPI,da=!0,ea="dash",fa=2079;function ga(a){if(a instanceof b("oz-player/utils/OzError")){var c=a,d=c.getExtra();return{errorCode:d.code,errorDescription:c.getDescription(),errorName:c.getType(),stack:c.stack,url:d.url}}else{c={message:(c=a==null?void 0:a.message)!=null?c:"",name:(d=a==null?void 0:a.name)!=null?d:"UnknownError",stack:(a==null?void 0:a.stack)||new Error().stack};return{errorCode:null,errorDescription:c.name+" "+c.message,errorName:"OZ_JAVASCRIPT_NATIVE",stack:c.stack,url:null}}}function ha(a){__p&&__p();var c=a.concurrentAutoplayManagementAPI,d=a.debugTools;a.ensureVideoElement;var e=a.fullscreenControllerRef,f=a.logger,g=a.machine,h=a.subscribersRef;return babelHelpers["extends"]({},c,{getCurrentState:function(){return r({debugTools:d,isAbrEnabled:!0,state:g.getCurrentState()})},getIsFullscreen:function(){var a=e.current;return a?a.getIsFullscreen():!1},getPlayheadPosition:function(){var a,b=0;return(a=g.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:b},pause:function(a){g.dispatch({payload:{reason:a},type:"controller_pause_requested"})},play:function(a){g.dispatch({payload:{reason:a},type:"controller_play_requested"})},requestSetIsFullscreen:function(a){var b=e.current;b&&b.requestSetIsFullscreen(a)},scrubBegin:function(){g.dispatch({type:"controller_scrub_begin_requested"})},scrubEnd:function(a){g.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},seek:function(a){g.dispatch({payload:{seekTargetPosition:a},type:"controller_seek_requested"})},selectVideoQuality:function(a){g.dispatch({payload:{selectedVideoQuality:a},type:"controller_quality_requested"})},setAdditionalLogData:function(a,b){f.setAdditionalLogData(a,b)},setCaptionsVisible:function(a){g.dispatch({payload:{captionsVisible:a},type:"controller_set_captions_visible_requested"})},setMuted:function(a,b){g.dispatch({payload:{muted:a,reason:b},type:"controller_muted_requested"})},setVolume:function(a){g.dispatch({payload:{volume:a},type:"controller_volume_requested"})},subscribe:function(a){var c=e.current,d=c?c.subscribe(a):null;h.current.push(a);return{remove:function(){d&&d.remove(),b("removeFromArray")(h.current,a)}}}})}function w(a){var c=l(a);b("useLayoutEffect_SAFE_FOR_SSR")(function(){c.current=a},[a]);return c}function a(a){__p&&__p();var c=w(a.updateLoopStateOnImplementationEnded),d=b("useGetDerivedStateFromProps")({manifest:a.manifest,manifestUrl:a.manifestUrl,videoFBID:a.videoFBID},function(b){return b==null||a.videoFBID!==b.videoFBID}),e=d.manifest,f=d.manifestUrl,x=d.videoFBID,y=l(null),z=i(function(){var a=y.current;if(a==null)throw b("unrecoverableViolation")("video node has not been created yet","comet_video_player");return a},[]),A=l(null),B=i(function(){return A.current},[]),C=i(function(){var a=A.current;if(a==null)throw b("unrecoverableViolation")("Attempted to access VideoElementAPI while it is not available.","comet_video_player");return a},[]),D=l(null),E=i(function(){return D.current},[]),ia=i(function(){var a=D.current;if(a==null)throw b("unrecoverableViolation")("Attempted to access EngineExtrasAPI while it is not available.","comet_video_player");return a},[]),F=w(a.experimentationConfig),G=l(null);d=m(o([[],[]]));var H=d[0];d=m(o([null,null,null]));var I=d[0],J=l([]),K=a.fullscreenController,L=a.videoPlayerPassiveViewabilityInfo,M=l((d=K)!=null?d:null);j(function(){var a;M.current=(a=K)!=null?a:null},[K]);var N=l((d=L)!=null?d:null);j(function(){var a;N.current=(a=L)!=null?a:null},[L]);d=m(null);var O=d[0],ja=d[1],P=l(null),ka=l(a.loggingMetaData);d=m(function(){var d=u({alwaysShowCaptions:Boolean(a.alwaysShowCaptions),ensureEngineExtrasAPI:ia,ensureVideoElementAPI:C,fullscreenControllerRef:M,getEngineExtrasAPIMaybe:E,getVideoElementAPIMaybe:B,getVideoPlayerCaptionsControllerMaybe:function(){return P.current},onStateMachine:function(a,b,c){e.handleStateMachine(a,b,c),ja(b),g()},ozPlayerPartsRef:G,updateLoopStateOnImplementationEndedRef:c,videoPlayerPassiveViewabilityInfoRef:N}),e=v({initialLoggingMetaData:ka.current}),f=new(b("VideoPlayerBanzaiLogFlusher"))(e),g=function(){J.current.forEach(function(a){a()}),f.flushLogs()};return{logFlusher:f,logger:e,machine:d,notifySubscribers:g}});d=d[0];var Q=d.logger,R=d.machine,S=d.notifySubscribers;j(function(){__p&&__p();R.dispatch({type:"implementation_mounted"});var a=!1,c=function(b){if(a)return;a=!0;d.remove();R.dispatch({payload:{reason:b},type:"implementation_unmounted"})},d=b("RunComet").onUnload(function(){c("page_unload")});return function(){c("react_effect_cleanup")}},[R]);j(function(){S()},[S]);j(function(){Q.handleMetaData(a.loggingMetaData)},[Q,a.loggingMetaData]);O=(d=O)!=null?d:R.getInitialState();if(O.controlledState.error){d=O.controlledState.error;throw b("unrecoverableViolation")(d.errorName+": "+d.errorDescription,"comet_video_player")}j(function(){if(K){var a=K.subscribe(function(){R.dispatch({type:"notify_fullscreen_changed"})});return function(){a.remove()}}},[R,K]);j(function(){if(L){var a=L.subscribe(function(){R.dispatch({type:"notify_viewability_changed"})});return function(){a.remove()}}},[R,L]);j(function(){P.current!=null&&P.current.updateCaptionsUrl(a.captionsUrl)},[a.captionsUrl]);var T=i(function(a){if(y.current===a)return;if(a!=null&&y.current!=null&&y.current!==a)throw b("unrecoverableViolation")("The video element should not be recreated","comet_video_player");y.current=a;a!=null?(A.current=q(a),R.dispatch({type:"implementation_video_node_mounted"})):(A.current=null,R.dispatch({type:"implementation_video_node_unmounted"}))},[R]);d=k(function(){return t(R,T)},[R,T]);var U=i(function(){__p&&__p();var a=B();if(a==null){b("recoverableViolation")("Representation change handled, but VideoElementAPI is missing","comet_video_player");return}a=E();if(a==null){b("recoverableViolation")("Representation change handled, but EngineExtrasAPI is missing","comet_video_player");return}R.dispatch({payload:{targetVideoQuality:a.getCurrentTargetVideoQuality()},type:"representation_changed"})},[E,B,R]),V={getAudioRepresentationId:function(){var a=B(),b=E();return a==null||b==null?null:b.getAudioRepresentationIDAtTime(a.getPlayheadPosition())},getCurrentAudioMimeCodecs:function(){var a=E();if(a==null)return null;a=a.getCurrentAudioRepresentation();return a!=null?a.getMimeCodecs():null},getCurrentAudioRepresentation:function(){var a=E();return a==null?null:a.getCurrentAudioRepresentation()},getCurrentVideoMimeCodecs:function(){var a=E();if(a==null)return null;a=a.getCurrentVideoRepresentation();return a!=null?a.getMimeCodecs():null},getCurrentVideoRepresentation:function(){var a=E();return a==null?null:a.getCurrentVideoRepresentation()},getDrmProtectionStatus:function(){var a=E();return a==null?null:a.isDrm()},getDroppedFrameCount:function(){var a=B();return a==null?null:a.getDroppedFrameCount()},getManifest:function(){return e},getManifestUrl:function(){return f},getOzBufferingDetector:function(){var a;return(a=(a=G.current)==null?void 0:a.bufferingDetector)!=null?a:null},getOzPlayer:function(){var a;return(a=(a=G.current)==null?void 0:a.player)!=null?a:null},getPlayheadPosition:function(){var a=B();return a==null?null:a.getPlayheadPosition()},getStreamType:function(){return ea},getTotalFrameCount:function(){var a=B();return a==null?null:a.getTotalFrameCount()},getVideoElement:function(){return C().getUnderlyingVideoElement()},getVideoRepresentationId:function(){var a=B(),b=E();return a==null||b==null?null:b.getVideoRepresentationIDAtTime(a.getPlayheadPosition())},useSegmentData:function(){return H},useSourceBuffer:function(){return I}},la=ca(),W=m(function(){return ha({concurrentAutoplayManagementAPI:la,debugTools:V,ensureVideoElement:z,fullscreenControllerRef:M,logger:Q,machine:R,subscribersRef:J})});W=W[0];var X=i(function(b){var c=P.current;if(!a.sideLoadCaptionsExpected&&!a.inbandCaptionsExpected)return c;c!=null?(c.updateInbandCaptionsExpected(b),R.dispatch({payload:{captionsLoaded:b},type:"captions_loaded_changed"})):((a.sideLoadCaptionsExpected||b)&&(c=n({captionsUrl:a.captionsUrl,inbandCaptionsExpected:b,onCaptionsLoaded:function(){R.dispatch({payload:{captionsLoaded:!0},type:"captions_loaded_changed"})}})),P.current=c);return c},[a.sideLoadCaptionsExpected,a.inbandCaptionsExpected,a.captionsUrl,R]),Y=l(X);j(function(){Y.current=X},[X]);var Z=i(function(c){__p&&__p();var d=c.graphQLVideoDRMInfo,e=c.handleOzPlayerInitError,f=c.handleOzPlayerRuntimeError,a=c.manifestUrl,i=c.manifestXmlStringInitial,j=c.manifestXmlStringResolved,k=c.onRepresentationChange,l=c.ozExperimentationConfig;c=c.videoFBID;try{var m=l;l=z();var n=C(),o=d?b("HTML5OzDrmHelper").OzDrmManagerModule:null,q=[];d&&c!=null&&q.push(new(b("HTML5OzDrmHelper").OzWidevineDrmProviderModule)(c,d.graphApiVideoLicenseUri,d.videoLicenseUriMap,null,null));var r=new(b("oz-player"))({config:m,customParsers:g(),customRepresentationParsers:h({ozConfig:m}),dimensions:{height:500,width:400},drmManagerModule:o,drmProviders:q,loggerConfig:{isOzDevConsoleEnabled:b("gkx")("722076"),observedOperationLoggers:[],perfLoggerProviders:[]},mpdUrl:a,rawMpdXml:j,seekHandler:function(a){R.dispatch({type:"controller_scrub_begin_requested"}),R.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},videoNodeOrQuickStarter:l});r.onError(function(a){f(a,"oz_error")});r.setupPlayer();r.addListener("switchVideoRepresentation",function(){k(r)});r.addListener("debug/dashPlayerEvent",function(a){a=a.detail;var b=a.type;switch(b){case"SegmentAppended":b=H.value;var c=I.value;s(b,a);aa(c,a);p(H);p(I)}});D.current=ba(r);var t=r.getMpd(),u=null;u=Y.current(Boolean(t.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(t.getCustomField("hasInbandCaptionsFromAccessibility")));if(m.getBool("emit_cea_608_availability",!1)){d=function(){var a=R.getCurrentState();a=a.controlledState;var b=Boolean(t.getCustomField("hasInbandCaptionsFromUsingASRCaptions")),c=Boolean(t.getCustomField("hasInbandCaptionsFromAccessibility"));c=b||c;a.inbandCaptionsAutogenerated!==b&&R.dispatch({payload:{inbandCaptionsAutogenerated:b},type:"inband_captions_autogenerated_changed"});c!==a.captionsLoaded&&(u=Y.current(c))};t.addListener("updated",d);r.updatePlayerRunTimeConfig({videoStreamDataHandler:function(a,b){if(m.getBool("parse_cea_608",!1)){var c=R.getCurrentState();c=c.controlledState;if(c.captionsLoaded){c=a.getCustomField("timescale")||0;R.dispatch({payload:{timescale:c,videoBytes:b},type:"cea608_bytes_received"})}}}})}var v=new(b("oz-player/strategies/OzBufferingDetector"))(l,m,function(){return n.getDuration()});o=function(){R.dispatch({type:"buffering_begin_requested"})};q=function(){R.dispatch({type:"buffering_end_requested"})};v.addListener("enter_buffering",o);v.addListener("leave_buffering",q);return{bufferingDetector:v,destroy:function(){D.current=null,v.destroy(),r.destroy(),u&&u.destroy()},manifestUrl:a,manifestXmlStringInitial:i,manifestXmlStringResolved:j,player:r,videoFBID:c}}catch(a){e(a,"oz_init_exception");return null}},[z,C,R,H,I,Y]),$=i(function(a){var b=G.current;R.dispatch({payload:{reason:a,willDestroy:b!=null},type:"implementation_engine_destroy_requested"});b!=null&&(G.current=null,b.destroy(),b=null,R.dispatch({payload:{reason:a},type:"implementation_engine_destroyed"}))},[R]);j(function(){__p&&__p();var c=F.current;if(c==null)throw b("unrecoverableViolation")("Experimentation config is missing","comet_video_player");var d=!0;if(G.current!=null&&G.current.videoFBID===x&&(G.current.manifestXmlStringInitial!==null?G.current.manifestXmlStringInitial!==e:G.current.manifestUrl!==f))b("BanzaiODS").bumpEntityKey(fa,"OzImplementation","manifest_reloaded");else{var g=function(a,b){if(!d)return;R.dispatch({payload:{implementationError:ga(a)},type:"implementation_engine_error"});d=!1;$("implementation_error")},h=function(b){b=Z({graphQLVideoDRMInfo:a.graphQLVideoDRMInfo,handleOzPlayerInitError:g,handleOzPlayerRuntimeError:g,manifestUrl:f,manifestXmlStringInitial:e,manifestXmlStringResolved:b,onRepresentationChange:U,ozExperimentationConfig:c,videoFBID:x});if(b==null)return;G.current=b;R.dispatch({payload:{availableQualities:b.player.getVideoQualities(),selectedVideoQuality:"auto",targetVideoQuality:b.player.getCurrentQuality()},type:"implementation_engine_initialized"})};if(e!==null)R.dispatch({type:"implementation_engine_manifest_inlined"}),h(e);else if(f!==null){var i=function(a){if(!d)return;R.dispatch({payload:{manifestUrl:f},type:"implementation_engine_manifest_download_success"});h(a)},j=function(a){if(!d)return;R.dispatch({payload:{manifestError:a,manifestUrl:f,reason:"manifest_download_error"},type:"implementation_engine_manifest_download_error"});g(a,"manifest_download_error")},k=function(a){if(!d)return;R.dispatch({payload:{manifestError:a,manifestUrl:f,reason:"manifest_download_exception"},type:"implementation_engine_manifest_download_error"});g(a,"manifest_download_exception")};R.dispatch({payload:{manifestUrl:f},type:"implementation_engine_manifest_download_requested"});b("requestManifest")(f).then(i,j)["catch"](k)}}return function(){d=!1,$("react_effect_cleanup")}},[Z,$,F,U,R,e,f,x]);O=r({debugTools:V,isAbrEnabled:!0,state:O});d=b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("video",babelHelpers["extends"]({className:b("killswitch")("COMET_SAFARI_MEGA_LAYOUT_FIX_FOR_VIDEO_ATTACHMENTS")?"k4urcfbm datstx6m a8c37x1j":"k4urcfbm kr520xx4 j9ispegn pmk7jnqg datstx6m n7fi1qx3 a8c37x1j i09qtzwb",controls:!1,muted:da},d,{ref:T})),a.renderWithVideoImplementationStates({implementationController:W,videoState:O})]});return b("killswitch")("COMET_SAFARI_MEGA_LAYOUT_FIX_FOR_VIDEO_ATTACHMENTS")?d:b("React").jsx("div",{className:"k4urcfbm l9j0dhe7 datstx6m",children:d})}e.exports=b("BudgetProduct").create("Video_Player_Oz",a)}),null);